<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{
				margin:0;
				padding:0;
			}
			html,body{
				width:100%;
				height:100%;
			}
			#canvas{
				background-color: #ccc;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas">浏览器不支持Canvas！</canvas>
		<script type="text/javascript">
			(function(){
				var canvasNode=document.querySelector('#canvas');
				canvasNode.width=window.innerWidth;
				canvasNode.height=window.innerHeight;
				var ctx=canvasNode.getContext('2d');
				var phone=[
					{title:'Huawei',value:0.5,color:'red'},
					{title:'Xiaomi',value:0.15,color:'orange'},
					{title:'Oppo',value:0.15,color:'green'},
					{title:'Vivo',value:0.15,color:'blue'},
					{title:'Other',value:0.05,color:'black'}
				];
				var X=window.innerWidth/2;
				var Y=window.innerHeight/2;
				var startAngle=0;
				var r=300;
				ctx.font="bold 40px '宋体'";
				ctx.textBaseline="middle";
				for(i=0;i<phone.length;i++){
					var angle=phone[i].value*Math.PI*2;
					var endAngle=startAngle+angle;
					ctx.beginPath();
					ctx.moveTo(X,Y);
					ctx.arc(X,Y,r,startAngle,endAngle);
					ctx.fillStyle=phone[i].color;
					ctx.fill();
					var textX=X+(r+20)*Math.cos(startAngle+angle/2);
					var textY=Y+(r+20)*Math.sin(startAngle+angle/2);
					if(textX<X){
						ctx.textAlign='end';
					}else{
						ctx.textAlign='start';
					}
					ctx.fillText(phone[i].title+" "+phone[i].value*100+"%",textX,textY);
					startAngle=endAngle;
				}
			})();
		</script>
	</body>
</html>
